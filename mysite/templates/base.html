{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Dicrimination Detection - Blai Ras</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
  <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href={% static 'css/bootstrap.min.css' %}>
  <!-- Material Design Bootstrap -->
  <link rel="stylesheet" href={% static 'css/mdb.min.css' %}>
  <!-- Your custom styles (optional) -->
  <link rel="stylesheet" href={%  static 'css/style.css' %}>
    <!-- MDBootstrap Datatables  -->
  <link rel="stylesheet" href={% static 'css/addons/datatables.min.css' %}>
  <link rel="stylesheet" href={% static 'css/addons/showResults.css' %}>
    <style>
        table#disconnectedTable
        {text-align: center;}
    </style>

<!--
</head>
<body>



  <!-- Start your project here-->
    {% block content %}
    {% endblock %}
  <!-- End your project here-->

  <!-- jQuery -->
  <script type="text/javascript" src={%  static 'js/jquery.min.js' %}></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src={%  static 'js/popper.min.js' %}></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src={%  static 'js/bootstrap.min.js' %}></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src={%  static 'js/mdb.min.js' %}></script>
  <!-- Your custom scripts (optional) -->
  <script type="text/javascript"></script>

 <script type="text/javascript" src={% static 'js/addons/datatables.min.js' %}></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('#scoreTable').DataTable({
                "order":[[3,"desc"]]
            });
            $('.dataTables_length').addClass('bs-select');
        });
    </script>

    <script type="text/javascript" id="dataPie" data-pos={{ pos }} data-neg={{ neg }} data-neut={{ neut }}>
        var script_tag = document.getElementById('dataPie')
      var pos = script_tag.getAttribute("data-pos");
        var neg = script_tag.getAttribute("data-neg");
        var neut = script_tag.getAttribute("data-neut");

            // Data
    const positive = parseInt(pos, 10);
    const negative = parseInt(neg, 10);
    const neutral = parseInt(neut, 10);

    //pie
    var ctxP = document.getElementById("pieChart").getContext('2d');
    var myPieChart = new Chart(ctxP, {
      plugins: [ChartDataLabels],
      type: 'pie',
      data: {
        labels: ["Positive", "Negative", "Neutral"],
        datasets: [{
          data: [positive, negative, neutral],
          backgroundColor: ["#5bc0de", "#d9534f", "#f9f9f9"],
          hoverBackgroundColor: ["#bae1ff", "#ff6f69", "#f9f1f1"],
          borderWidth: 4,
          borderColor: '#414a4c'
        }]
      },
      options: {
        responsive: true,
        legend: {
          position: 'bottom',
          labels: {
            padding: 25,
            boxWidth: 25,
          }
        },
        plugins: {
          datalabels: {
            formatter: (value, ctx) => {
              let sum = 0;
              let dataArr = ctx.chart.data.datasets[0].data;
              dataArr.map(data => {
                  sum = sum+ data;
              });
              let percentage = (value * 100 / sum).toFixed(2) + "%";
              return percentage;
            },
            color: 'black',
            labels: {
              title: {
                font: {
                  size: '20'
                }
              }
            }
          }
        },

      }
    });
    </script>
</body>
</html>